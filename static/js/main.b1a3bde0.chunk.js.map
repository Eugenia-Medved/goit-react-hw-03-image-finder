{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.js","services/pixabayAPI.js","components/ImageGallery/ImageGallery.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/BodyGallery/BodyGallery.js","components/App/App.js","reportWebVitals.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","search","handleChangeSearch","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","className","s","SearchForm","this","SearchFormInput","type","autoComplete","autoFocus","placeholder","onChange","SearchFormButton","style","color","Component","fetchPicture","page","fetch","then","response","ok","console","log","json","Promise","reject","Error","ImageGallery","children","ImageGalleryItem","hits","onClickGalleryItem","map","id","webformatURL","largeImageURL","tags","onClick","src","alt","ImageGalleryItemImage","Button","loadMore","Container","data-action","modalRoot","document","querySelector","Modal","handleKeyDown","code","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","BodyGallery","messenge","loading","showModal","imageForModal","title","getDataForGallery","prevState","catch","error","finally","addSearch","name","toggleModal","scrollPageToEnd","setTimeout","scrollBy","top","documentElement","scrollHeight","behavior","prevProps","prevSearch","nextSearch","data","totalHits","toast","length","height","width","App","position","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b1a3bde0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1hzhq\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3cP4K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3O__X\",\"Container\":\"Button_Container__3FT91\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2YVff\",\"Modal\":\"Modal_Modal__2wrCV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1yoa-\"};","import React, { Component } from 'react';\nimport { BsSearch } from 'react-icons/bs';\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    search: '',\n  };\n\n  handleChangeSearch = e => {\n    this.setState({\n      search: e.currentTarget.value.toLowerCase(),\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.search.trim() === '') {\n      // toast.error('Введите имя покемона.');\n      return;\n    }\n\n    this.props.onSubmit(this.state.search);\n\n    this.setState({ search: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleChangeSearch}\n          />\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <BsSearch style={{ color: 'white' }} />\n          </button>\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","function fetchPicture(search, page) {\n  const key = '19406187-1c8edae385fab91e951e657a3';\n  return fetch(\n    `https://pixabay.com/api/?q=${search}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      console.log(response);\n      return response.json();\n    }\n\n    return Promise.reject(new Error(`По запросу ${search} ничего не найдено`));\n  });\n}\n\nexport default fetchPicture;\n","import s from './ImageGallery.module.css';\n\nfunction ImageGallery({ children }) {\n  return <ul className={s.ImageGallery}>{children}</ul>;\n}\n\nexport default ImageGallery;\n","import React, { Component } from 'react';\nimport s from './ImageGalleryItem.module.css';\n\nclass ImageGalleryItem extends Component {\n  render() {\n    const { hits, onClickGalleryItem } = this.props;\n\n    return hits.map(({ id, webformatURL, largeImageURL, tags }) => (\n      <li\n        key={id}\n        className={s.ImageGalleryItem}\n        onClick={() => onClickGalleryItem(largeImageURL, tags)}\n      >\n        <img src={webformatURL} alt={tags} className={s.ImageGalleryItemImage} />\n      </li>\n    ));\n  }\n}\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nfunction Button({ loadMore }) {\n  return (\n    <div className={s.Container}>\n      <button type=\"button\" className={s.Button} data-action=\"load-more\" onClick={loadMore}>\n        Load more\n      </button>\n    </div>\n  );\n}\n\nButton.propTypes = {\n  loadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = e => {\n    const { onClick } = this.props;\n\n    if (e.code === 'Escape') {\n      onClick();\n    }\n  };\n  handleBackdropClick = e => {\n    const { onClick } = this.props;\n\n    if (e.currentTarget === e.target) {\n      onClick();\n    }\n  };\n  render() {\n    const { children } = this.props;\n\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  children: PropTypes.object.isRequired,\n};\n","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\n\nimport { toast } from 'react-toastify';\nimport fetchPicture from 'services/pixabayAPI';\nimport ImageGallery from 'components/ImageGallery';\nimport ImageGalleryItem from 'components/ImageGalleryItem';\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\n\nclass BodyGallery extends Component {\n  state = {\n    hits: [],\n    search: '',\n    page: 1,\n    messenge: 'Все пропало',\n    loading: false,\n    showModal: false,\n    imageForModal: '',\n    title: '',\n  };\n\n  componentDidMount() {}\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevSearch = prevProps.search;\n    const nextSearch = this.props.search;\n\n    if (prevSearch !== nextSearch) {\n      this.setState({ loading: true, page: 1 });\n\n      fetchPicture(nextSearch, this.state.page)\n        .then(data => {\n          if (data.totalHits === 0) {\n            toast.error(`По запросу ${nextSearch} ничего не найдено`);\n          }\n          this.setState({\n            hits: data.hits,\n            page: prevState.page + 1,\n            totalHits: data.totalHits,\n          });\n        })\n        .catch(error => {\n          this.setState({ error: true });\n          toast.error(`По запросу ${nextSearch} ничего не найдено`);\n        })\n        .finally(() => this.setState({ loading: false }));\n    }\n  }\n\n  getDataForGallery = () => {\n    const search = this.props.search;\n\n    this.setState(prevState => ({\n      loading: true,\n      hits: prevState.hits,\n    }));\n\n    fetchPicture(search, this.state.page)\n      .then(({ hits }) => {\n        this.setState(prevState => ({\n          hits: [...this.state.hits, ...hits],\n          page: prevState.page + 1,\n        }));\n      })\n      .catch(error => {\n        this.setState({ error: true });\n      })\n      .finally(() => this.setState({ loading: false }));\n  };\n\n  addSearch = name => {\n    this.setState({ search: name });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  loadMore = () => {\n    this.getDataForGallery();\n    this.scrollPageToEnd();\n  };\n\n  scrollPageToEnd = () => {\n    setTimeout(() => {\n      window.scrollBy({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }, 500);\n  };\n\n  onClickGalleryItem = (src, alt) => {\n    this.toggleModal();\n    this.setState({ imageForModal: src, title: alt });\n  };\n\n  render() {\n    const { hits, loading, showModal, imageForModal, title, totalHits } = this.state;\n\n    return (\n      <>\n        <ImageGallery>\n          {hits.length !== 0 && (\n            <ImageGalleryItem hits={hits} onClickGalleryItem={this.onClickGalleryItem} />\n          )}\n        </ImageGallery>\n\n        {loading === true && <Loader type=\"Rings\" color=\"#00BFFF\" height={200} width={200} />}\n        {hits.length > 0 && hits.length < totalHits && <Button loadMore={this.loadMore} />}\n        {showModal && (\n          <Modal onClick={this.onClickGalleryItem}>\n            <img src={imageForModal} alt={title} />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nexport default BodyGallery;\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\nimport Searchbar from 'components/Searchbar';\nimport BodyGallery from 'components/BodyGallery/BodyGallery';\n\nclass App extends Component {\n  state = {\n    search: '',\n  };\n\n  addSearch = name => {\n    this.setState({ search: name });\n  };\n\n  render() {\n    const { search } = this.state;\n    return (\n      <>\n        <Searchbar onSubmit={this.addSearch} />\n        <BodyGallery search={search} />\n        <ToastContainer position=\"top-right\" />\n      </>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from 'components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1DsbQ\",\"SearchForm\":\"Searchbar_SearchForm__210av\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2Hwy3\",\"SearchFormButton\":\"Searchbar_SearchFormButton__tEEzj\"};"],"sourceRoot":""}